<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Card Payment | KC Bible Shop</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: #fdfaf5;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

header {
    background: #630d16;
    color: white;
    padding: 25px;
    text-align: center;
}

nav {
    margin-top: 10px;
}

nav a {
    color: #f7e08b;
    margin: 0 10px;
    text-decoration: none;
    font-size: 13px;
}

main {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 40px 20px;
}

.card-box {
    background: white;
    max-width: 420px;
    width: 100%;
    padding: 40px;
    border-radius: 24px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.12);
}

.card-box h2 {
    color: #630d16;
    margin-bottom: 8px;
    text-align: center;
}

.card-box p {
    text-align: center;
    font-size: 14px;
    color: #555;
    margin-bottom: 25px;
}

label {
    font-size: 12px;
    font-weight: 600;
    color: #444;
    display: block;
    margin-bottom: 6px;
}

input {
    width: 100%;
    padding: 14px;
    margin-bottom: 16px;
    border-radius: 10px;
    border: 1px solid #ddd;
    font-size: 14px;
}

.row {
    display: flex;
    gap: 12px;
}

.pay-btn {
    width: 100%;
    padding: 16px;
    border-radius: 40px;
    border: none;
    background: linear-gradient(135deg, #630d16, #8a1b25);
    color: white;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    margin-top: 10px;
}

.amount {
    text-align: center;
    font-size: 16px;
    font-weight: bold;
    color: #630d16;
    margin-bottom: 20px;
}

.error {
    background: #fee2e2;
    color: #991b1b;
    padding: 12px;
    border-radius: 10px;
    font-size: 13px;
    margin-bottom: 15px;
    display: none;
}

.note {
    text-align: center;
    font-size: 12px;
    color: gray;
    margin-top: 15px;
}
</style>
</head>

<body>

<header>
    <h1>Card Payment</h1>
    <p>Secure Checkout (Demo)</p>

    <nav>
        <a href="index.html">üè† Home</a>
        <a href="products.html">üì¶ Products</a>
        <a href="checkout.html">üßæ Checkout</a>
    </nav>
</header>

<main>
    <div class="card-box">
        <h2>Enter Card Details</h2>
        <p>Use any test card details</p>

        <div class="amount">
            Amount Due: <span id="amount">R0.00</span>
        </div>

        <div id="errorBox" class="error"></div>

        <label>Cardholder Name</label>
        <input type="text" id="name" placeholder="John Doe">

        <label>Card Number</label>
        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">

        <div class="row">
            <div style="flex:1;">
                <label>Expiry Date</label>
                <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
            </div>
            <div style="flex:1;">
                <label>CVV</label>
                <input type="text" id="cvv" placeholder="123" maxlength="3">
            </div>
        </div>

        <button class="pay-btn" onclick="completePayment()">
            Pay Now
        </button>
        
        <button onclick="window.location.href='receipt.html'" style="
            display:block;
            width: fit-content;
            margin: 25px auto 0;
            padding: 10px 22px;
            border-radius: 30px;
            border: none;
            background: #d4af37;
            color: #000;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        ">
            üßæ Print Receipt
        </button>
        
        <p class="note">
            * This is a demo payment screen for presentation only.
        </p>
    </div>
</main>

<footer>
    <div style="
        background: black;
        color: #9ca3af;
        padding: 24px;
        text-align: center;
        font-size: 12px;
    ">
        &copy; 2025 KC Bible Shop
    </div>
</footer>

<script>
/* DISPLAY AMOUNT */
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let total = 0;
cart.forEach(item => total += item.price);
document.getElementById("amount").textContent = "R" + total.toFixed(2);

/* FORMAT CARD NUMBER */
document.getElementById("cardNumber").addEventListener("input", function () {
    let value = this.value.replace(/\D/g, "");
    value = value.substring(0, 16);
    this.value = value.replace(/(.{4})/g, "$1 ").trim();
});

/* FORMAT EXPIRY DATE */
document.getElementById("expiry").addEventListener("input", function () {
    let value = this.value.replace(/\D/g, "");
    if (value.length > 2) {
        value = value.substring(0, 2) + "/" + value.substring(2, 4);
    }
    this.value = value.substring(0, 5);
});

/* RESTRICT CVV TO NUMBERS */
document.getElementById("cvv").addEventListener("input", function () {
    this.value = this.value.replace(/\D/g, "").substring(0, 3);
});

/* PAYMENT VALIDATION */
function completePayment() {
    const name = document.getElementById("name").value.trim();
    const cardNumber = document.getElementById("cardNumber").value.replace(/\s/g, "");
    const expiry = document.getElementById("expiry").value;
    const cvv = document.getElementById("cvv").value;
    const errorBox = document.getElementById("errorBox");

    errorBox.style.display = "none";

    if (!name || !cardNumber || !expiry || !cvv) {
        showError("Please fill in all card details.");
        return;
    }

    if (cardNumber.length !== 16) {
        showError("Card number must be 16 digits.");
        return;
    }

    if (expiry.length !== 5) {
        showError("Expiry date must be in MM/YY format.");
        return;
    }

    if (cvv.length !== 3) {
        showError("CVV must be 3 digits.");
        return;
    }

    alert(
        "üéâ Payment Successful!\n\n" +
        "Thank you for your purchase.\n" +
        "Your payment has been processed securely.\n\n" +
        "May God bless you.\n\nKC Bible Shop"
    );
}

/* ERROR DISPLAY */
function showError(message) {
    const errorBox = document.getElementById("errorBox");
    errorBox.textContent = message;
    errorBox.style.display = "block";
}
</script>

</body>
</html>
